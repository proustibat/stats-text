<ion-header>
    <ion-navbar>
        <ion-title color="primary">
            Text stats
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>


    <h1 text-uppercase>Source</h1>

    <!-- the text -->
    <data-source *ngIf="isReady" #dataSource>{{text}}</data-source>


    <!-- Buttons to change or shuffle the source text -->
    <ion-row align-items-center justify-item-left>
        <ion-col col-auto>
            <!-- Button to apply on a random text -->
            <button class="data-buttons"
                    ion-button
                    small
                    color="interaction"
                    (click)="init()"><ion-icon name="shuffle"></ion-icon></button>
        </ion-col>
        <ion-col col-auto>
            <!-- Button to apply on a user text -->
            <button class="data-buttons"
                    ion-button
                    small
                    color="interaction"
                    (click)="swap()"><ion-icon name="swap"></ion-icon></button>
        </ion-col>
    </ion-row>



    <!-- STATS: GLOBAL -->
    <h1>Global Stats</h1>

    <global-stats *ngIf="isReady" [meta]="textOccurrences.meta"></global-stats>



    <!-- STATS: DETAILS -->
    <h1>Details</h1>

    <!-- Settings for the list to display -->
    <display-settings
            *ngIf="isReady && textOccurrences"
            #displaySettings
            [displayedWords]="stats.length"
            [minLength]="textOccurrences.smallest[0] ? textOccurrences.smallest[0].length : 0"
            [maxLength]="textOccurrences.longest[0] ? textOccurrences.longest[0].length : 0"
            [minOccurrences]="limitsOccurrences.min"
            [maxOccurrences]="limitsOccurrences.max"
            (onSettingsChanged)="filterList($event)"
    ></display-settings>

    <!-- Display settings for the list -->
    <!--<ion-row align-items-center margin-bottom>-->
        <!--<ion-col>-->
            <!--<button class="read-more-button"-->
                    <!--ion-button-->
                    <!--small-->
                    <!--color="interaction"-->
                    <!--no-margin-->
                    <!--(click)="onReadMoreSettings()">-->
                <!--{{readMoreSettingsOpened ? 'Close display settings' : 'Show display settings'}}-->
            <!--</button>-->
        <!--</ion-col>-->
        <!--<ion-col *ngIf="displayedWords" padding-horizontal>-->
            <!--{{displayedWords}} words displayed-->
        <!--</ion-col>-->
    <!--</ion-row>-->
    <!--<div class="read-more-wrap" [ngClass]="readMoreSettingsOpened ? 'opened' : 'closed'">-->
        <!--<div class="read-more-target"-->
             <!--padding-->
             <!--[ngClass]="readMoreSettingsOpened ? 'opened' : 'closed'">-->

            <!--&lt;!&ndash; CRITERION: SEARCH A WORD OR CHARS&ndash;&gt;-->
            <!--<ion-searchbar-->
                    <!--has-transition-->
                    <!--no-margin-->
                    <!--margin-bottom-->
                    <!--[(ngModel)]="searchTerm"-->
                    <!--(ionInput)="setFilteredItems($event)"-->
                    <!--(ionClear)="setFilteredItems($event)"></ion-searchbar>-->

            <!--&lt;!&ndash;CRITERION: ORDER LIST BY NUMBER OF APPEARANCES IN THE TEXT (ASC OR DESC)&ndash;&gt;-->
            <!--<p class="order-buttons"-->
               <!--has-transition-->
               <!--data-transition-delay-150-->
               <!--no-margin-->
               <!--margin-bottom>Order list by occurrences-->
                <!--<button ion-button-->
                        <!--small-->
                        <!--color="interaction"-->
                        <!--(click)="sort('desc')">-->
                    <!--<ion-icon name="trending-down"></ion-icon></button>-->
                <!--<button ion-button-->
                        <!--small-->
                        <!--color="interaction"-->
                        <!--(click)="sort('asc')">-->
                    <!--<ion-icon name="trending-up"></ion-icon></button>-->
            <!--</p>-->

            <!--&lt;!&ndash; CRITERION: FILTER LIST DEPENDING OF LENGTH'S WORDS&ndash;&gt;-->
            <!--<div class="filter-length"-->
                 <!--has-transition-->
                 <!--data-transition-delay-250-->
                 <!--no-margin-->
                 <!--margin-bottom>-->
                <!--<p>Display words from <ion-badge color="light">{{rangeLength.lower}}</ion-badge> to <ion-badge color="light">{{rangeLength.upper}}</ion-badge> characters.</p>-->
            <!--</div>-->
            <!--<div class="range-occurences"-->
                 <!--has-transition-->
                 <!--has-transition-content-->
                 <!--data-transition-delay-350-content-->
                 <!--no-margin-->
                 <!--margin-bottom>-->
                <!--<ion-range color="interaction"-->
                           <!--no-margin-->
                           <!--no-padding-->
                           <!--dualKnobs="true"-->
                           <!--*ngIf="textOccurrences"-->
                           <!--[min]="textOccurrences.smallest[0] ? textOccurrences.smallest[0].length : 0"-->
                           <!--[max]="textOccurrences.longest[0] ? textOccurrences.longest[0].length : 0"-->
                           <!--[(ngModel)]="rangeLength"-->
                           <!--(ionChange)="setFilteredItems($event)">-->
                    <!--<ion-label range-left>{{textOccurrences.smallest[0] ? textOccurrences.smallest[0].length : 0}}</ion-label>-->
                    <!--<ion-label range-right>{{textOccurrences.longest[0] ? textOccurrences.longest[0].length : 0}}</ion-label>-->
                <!--</ion-range>-->
            <!--</div>-->

            <!--&lt;!&ndash; CRITERION: FILTER LIST BY NUMBER OF APPEARANCES IN THE TEXT (MORE OR LESS THAN CHOSEN BY USER) &ndash;&gt;-->
            <!--<div class="settings-occurrences-times"-->
                 <!--has-transition-->
                 <!--data-transition-delay-450-->
                 <!--no-margin-->
                 <!--margin-bottom>-->
                <!--<ion-row align-items-start justify-content-start>-->
                    <!--<ion-col col-auto>Display words that appear&nbsp;</ion-col>-->
                    <!--<ion-col col-auto>-->
                        <!--<ion-select item-start-->
                                    <!--no-padding-->
                                    <!--text-center-->
                                    <!--[(ngModel)]="timesSettingType"-->
                                    <!--(ionChange)="setFilteredItems()"-->
                                    <!--interface="action-sheet">-->
                            <!--<ion-option *ngFor="let valType of timesSettings('type')">{{valType}}</ion-option>-->
                        <!--</ion-select>-->
                    <!--</ion-col>-->
                    <!--<ion-col col-auto>&nbsp;than&nbsp;</ion-col>-->
                    <!--<ion-col col-auto>-->
                        <!--<ion-select item-start-->
                                    <!--no-padding-->
                                    <!--text-center-->
                                    <!--[(ngModel)]="timesSettingNb"-->
                                    <!--(ionChange)="setFilteredItems()"-->
                                    <!--interface="action-sheet">-->
                            <!--<ion-option *ngFor="let valNb of timesSettings('nb')">{{valNb}}</ion-option>-->
                        <!--</ion-select>&nbsp;-->
                    <!--</ion-col >-->
                    <!--<ion-col col-auto>times&nbsp;</ion-col>-->
                    <!--<ion-col col-auto>&nbsp;(or&nbsp;</ion-col>-->
                    <!--<ion-col col-auto>&nbsp;equal&nbsp;</ion-col>-->
                    <!--<ion-col col-auto>&nbsp;to)&nbsp;</ion-col>-->
                    <!--<ion-col col-auto>in&nbsp;</ion-col>-->
                    <!--<ion-col col-auto>the&nbsp;</ion-col>-->
                    <!--<ion-col col-auto>text.</ion-col>-->
                <!--</ion-row>-->
            <!--</div>-->

            <!--&lt;!&ndash; CRITERION: sensitive case &ndash;&gt;-->
            <!--<div class="settings-sensitive-case"-->
                 <!--has-transition-->
                 <!--data-transition-delay-550-->
                 <!--no-margin>-->
                <!--<ion-checkbox-->
                        <!--color="interaction"-->
                        <!--margin-right-->
                        <!--[(ngModel)]="sensitiveCase"-->
                        <!--(ionChange)="createStats(true)">-->
                <!--</ion-checkbox>-->
                <!--<span>Sensitive case</span>-->
            <!--</div>-->


            <!--&lt;!&ndash; CLEAR ALL SETTINGS &ndash;&gt;-->
            <!--<button class="settings-clear"-->
                    <!--ion-button-->
                    <!--small-->
                    <!--color="interaction"-->
                    <!--margin-top-->
                    <!--has-transition-->
                    <!--data-transition-delay-650-->
                    <!--(click)="onClearAllSettings()">-->
                <!--Clear all settings-->
            <!--</button>-->

        <!--</div>-->
    <!--</div>-->


    <!-- The list -->
    <ion-item *ngFor="let item of stats" padding-horizontal>
        <span>{{ item.value }}</span>
        <ion-badge color="dark" item-end>{{ item.number }}</ion-badge>
    </ion-item>

    <!-- Message if list is empty because of the settings -->
    <p *ngIf="stats && stats.length===0">Your criteria don't match any words.</p>

</ion-content>
