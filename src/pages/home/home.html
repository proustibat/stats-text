<ion-header>
    <ion-navbar>
        <ion-title color="primary">
            Ionic Occurences
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>

    <div>
        <h1 text-uppercase class="data-title">Data</h1>
        <button class="data-buttons" outline color="interaction" ion-button small (click)="shuffle()"><ion-icon name="shuffle"></ion-icon></button>
        <button class="data-buttons" outline color="interaction" ion-button small (click)="swap()"><ion-icon name="swap"></ion-icon></button>
        <p class="text" text-justify>{{text}}</p>
    </div>

    <div>
        <h1>Global Stats</h1>
        <ion-row class="global-stats" *ngIf="textOccurrences && textOccurrences.meta">
            <ion-col col-2 text-center>
                <span class="value"><ion-badge margin-bottom color="dark">{{textOccurrences.meta.totalWords}}</ion-badge></span>
                <span class="label" text-uppercase>Total<br/>Words</span>
            </ion-col>
            <ion-col col-3 text-center>
                <span class="value"><ion-badge margin-bottom color="dark">{{textOccurrences.meta.differentWords}}</ion-badge></span>
                <span class="label" text-uppercase>Different<br/>Words</span>
            </ion-col>

            <ion-col col-4 text-center>
                <span class="value"><ion-badge margin-bottom color="dark">{{textOccurrences.meta.charsWS}}</ion-badge></span>
                <span class="label" text-uppercase>Characters<br/>(with spaces)</span>
            </ion-col>
            <ion-col col-3 text-center>
                <span class="value"><ion-badge margin-bottom color="dark">{{textOccurrences.meta.charsNS}}</ion-badge></span>
                <span class="label" text-uppercase>Characters<br/>(no space)</span>
            </ion-col>
        </ion-row>

        <div class="details" padding-top>
            <h1>Details</h1>
            <button class="read-more-button" small ion-button color="interaction" (click)="onReadMore($event)">
                {{readMoreOpened ? 'Close display settings' : 'Show display settings'}}
            </button>
            <div class="read-more-wrap" [ngClass]="readMoreOpened ? 'opened' : 'closed'">
                <div class="read-more-target" [ngClass]="readMoreOpened ? 'opened' : 'closed'">
                    <ion-searchbar
                            has-transition
                            [(ngModel)]="searchTerm"
                            (ionInput)="setFilteredItems($event)"
                            (ionClear)="reset()"></ion-searchbar>

                    <p class="order-buttons"
                       has-transition
                       data-transition-delay-150>Order list by occurrences
                        <button ion-button small color="interaction" (click)="sort('desc')"><ion-icon name="trending-down"></ion-icon></button>
                        <button ion-button small color="interaction" (click)="sort('asc')"><ion-icon name="trending-up"></ion-icon></button>
                    </p>

                    <div class="filter-length"
                         has-transition
                         data-transition-delay-250>
                        <p no-padding no-margin padding-top>Display words from <ion-badge color="light">{{rangeLength.lower}}</ion-badge> to <ion-badge color="light">{{rangeLength.upper}}</ion-badge> characters.</p>
                    </div>

                    <div class="range-occurences"
                         no-padding
                         no-margin
                         has-transition
                         has-transition-content
                         data-transition-delay-350-content>
                        <ion-range no-padding color="interaction" *ngIf="textOccurrences" dualKnobs="true" [min]="textOccurrences.smallest[0] ? textOccurrences.smallest[0].length : 0" [max]="textOccurrences.longest[0] ? textOccurrences.longest[0].length : 0" [(ngModel)]="rangeLength" (ionChange)="setFilteredItems($event)">
                            <ion-label range-left>{{textOccurrences.smallest[0] ? textOccurrences.smallest[0].length : 0}}</ion-label>
                            <ion-label range-right>{{textOccurrences.longest[0] ? textOccurrences.longest[0].length : 0}}</ion-label>
                        </ion-range>
                    </div>

                    <div class="settings-occurrences-times"
                         has-transition
                         data-transition-delay-450
                         no-margin
                         no-padding>
                        <ion-row align-items-start justify-content-start>
                            <ion-col col-auto>Display words that appear&nbsp;</ion-col>
                            <ion-col col-auto>
                                <ion-select item-start
                                            text-center
                                            no-padding
                                            no-margin
                                            [(ngModel)]="timesSettingType"
                                            (ionChange)="occurrencesTimesChosen()"
                                            interface="action-sheet">
                                    <ion-option *ngFor="let valType of timesSettings('type')">{{valType}}</ion-option>
                                </ion-select>
                            </ion-col>
                            <ion-col col-auto>&nbsp;than&nbsp;</ion-col>
                            <ion-col col-auto>
                                <ion-select item-start
                                            text-center
                                            no-padding
                                            no-margin
                                            [(ngModel)]="timesSettingNb"
                                            (ionChange)="occurrencesTimesChosen()"
                                            interface="action-sheet">
                                    <ion-option *ngFor="let valNb of timesSettings('nb')">{{valNb}}</ion-option>
                                </ion-select>
                            </ion-col >
                            <ion-col col-auto>&nbsp;times </ion-col>
                            <ion-col col-auto>&nbsp;in</ion-col>
                            <ion-col col-auto>&nbsp;the</ion-col>
                            <ion-col col-auto>&nbsp;text</ion-col>
                        </ion-row>
                    </div>

                    <hr has-transition data-transition-delay-550/>
                </div>
            </div>
        </div>




        <p *ngFor="let item of stats">
            <ion-badge color="dark">{{ item.number }}</ion-badge>
            {{ item.value }}
        </p>


    </div>


</ion-content>
