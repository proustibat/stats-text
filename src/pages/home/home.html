<ion-header>
    <ion-navbar>
        <ion-title color="primary">
            Text stats
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>


    <h1 text-uppercase>Source</h1>

    <!-- the text -->
    <data-source *ngIf="isReady" #dataSource>{{text}}</data-source>


    <!-- Buttons to change or shuffle the source text -->
    <ion-row align-items-center justify-item-left>
        <ion-col col-auto>
            <!-- Button to apply on a random text -->
            <button class="data-buttons"
                    ion-button
                    small
                    color="interaction"
                    (click)="init()"><ion-icon name="shuffle"></ion-icon></button>
        </ion-col>
        <ion-col col-auto>
            <!-- Button to apply on a user text -->
            <button class="data-buttons"
                    ion-button
                    small
                    color="interaction"
                    (click)="swap()"><ion-icon name="swap"></ion-icon></button>
        </ion-col>
    </ion-row>



    <!-- STATS: GLOBAL -->
    <h1>Global Stats</h1>

    <global-stats *ngIf="isReady" [meta]="textOccurrences.meta"></global-stats>



    <!-- STATS: DETAILS -->
    <h1>Details</h1>

    <!-- Settings for the list to display -->
    <display-settings
            *ngIf="isReady && textOccurrences"
            #displaySettings
            [displayedWords]="stats.length"
            [minLength]="textOccurrences.smallest[0] ? textOccurrences.smallest[0].length : 0"
            [maxLength]="textOccurrences.longest[0] ? textOccurrences.longest[0].length : 0"
            [minOccurrences]="limitsOccurrences.min"
            [maxOccurrences]="limitsOccurrences.max"
            (onSettingsChanged)="filterList($event)"
    ></display-settings>


    <!-- The list -->
    <ion-item *ngFor="let item of stats" padding-horizontal>
        <span>{{ item.value }}</span>
        <ion-badge color="dark" item-end>{{ item.number }}</ion-badge>
    </ion-item>

    <!-- Message if list is empty because of the settings -->
    <p *ngIf="stats && stats.length===0">Your criteria don't match any words.</p>

</ion-content>
